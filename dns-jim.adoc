= It's DNS, Jim...
:backend: revealjs
:revealjs_theme: black
:imagesdir: images
:figure-caption!:

image::bones.jpg[Bones,350]

== ... But Not As We Know It

Jim Hague +
mailto:jim.hague@acm.org[jim.hague@acm.org] +
https://twitter.com/banbury_bill[@banbury_bill] +
http://www.sinodun.com[Sinodun Internet Technologies]

[%notitle]
== DoH RFC

....
Internet Engineering Task Force (IETF)                        P. Hoffman
Request for Comments: 8484                                         ICANN
Category: Standards Track                                     P. McManus
ISSN: 2070-1721                                                  Mozilla
                                                            October 2018


                      DNS Queries over HTTPS (DoH)

Abstract

   This document defines a protocol for sending DNS queries and getting
   DNS responses over HTTPS.  Each DNS query-response pair is mapped
   into an HTTP exchange.
....

[.notes]
--
* What I'm going to be talking about.
* But first, we need some background.
--

[%notitle]
== In the beginning...

image::the_beginning.jpg[background,size=cover]

[.notes]
--
* In the beginning, there was the Word, and the Word was RFC1034.
* Thus spake Mockapetris.
--

[%notitle]
== ... was the word.

....
Network Working Group                                     P. Mockapetris
Request for Comments: 1034                                           ISI
Obsoletes: RFCs 882, 883, 973                              November 1987


                 DOMAIN NAMES - CONCEPTS AND FACILITIES



1. STATUS OF THIS MEMO

This RFC is an introduction to the Domain Name System (DNS), and omits
many details which can be found in a companion RFC, "Domain Names -
Implementation and Specification" [RFC-1035].  That RFC assumes that the
reader is familiar with the concepts discussed in this memo.

A subset of DNS functions and data types constitute an official
protocol.  The official protocol includes standard queries and their
responses and most of the Internet class data formats (e.g., host
addresses).
....

[.notes]
--
* The DNS Ur-document.
* Describes a protocol operating over UDP and TCP.
* Not much thought of security or privacy.
--

== DNS

* A consistent namespace used for referring to resources.
* Maintained in a distributed manner.
* Local caching to improve performance.

[.notes]
--
I'm taking a quick tour through the basics
of how DNS works, largely so we can get the terminology.

I'm only looking at items of interest to application devs.
There's a chunk of stuff on server management which I'm
not going to discuss.
--

== The domain namespace
image::domain-hierarchy.png[Domain Hierarchy]

[.notes]
--
Let's look at the namespace first.

The containers outline the division of responsibility for
parts of the namespace. Note that a single zone can have multiple
levels. In the UK, .co.uk and .org.uk are all in one zone.

The top of the tree is the root zone. This has a null name.
Note FQDN ending in '.'.
--

== Delegation of authority
image::delegation-of-authority.png[Delegation of authority]

[.notes]
--
Another view showing delegation of authority. Note the
cross-cutting link to/from verisign.ca.
--

== Root servers

* A fixed list of IPv4 and IPv6 addresses for 13 servers.
** `a.root-servers.net` .. `m.root-servers.net`

[.notes]
--
Fixed set of 13 root server addresses. Why 13?
--

== Root servers operators

* VeriSign, Inc., University of Southern California, Cogent Communications,
  University of Maryland, NASA Ames Research Centre, Internet Systems Consortium, Inc.,
  US Department of Defence, US Army Research Lab, Netnod (Sweden),
  RIPE, ICANN, WIDE Project (Japan)

https://www.iana.org/domains/root/servers[IANA has the details]

[.notes]
--
J root was originally Network Solutions, now taken over by VeriSign.
--

== Recursive servers

* Search the hierarchy to resolve queries
* Cache results and reuse them in future queries
* Typically run by ISP...
* ... or 3rd party, e.g. Google, OpenDNS

== Stub resolver

* Your local name resolution
* Typically using recursive server(s) supplied by DHCP

[%notitle]
== The Snowden revelations

image::snowden.jpg[Snowden]

[.notes]
--
* In 2013, Edward Snowden revealed that interception was far more widespread than believed.
--


[%notitle]
== The IETF response

....
Internet Engineering Task Force (IETF)                        S. Farrell
Request for Comments: 7258                        Trinity College Dublin
BCP: 188                                                   H. Tschofenig
Category: Best Current Practice                                 ARM Ltd.
ISSN: 2070-1721                                                 May 2014


                   Pervasive Monitoring Is an Attack

Abstract

   Pervasive monitoring is a technical attack that should be mitigated
   in the design of IETF protocols, where possible.
....

[.notes]
--
* The IETF's response.
--
